{"version":3,"sources":["uni-app:///main.js","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?e07d","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?d05b","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?724d","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?6918","uni-app:///pages/agreement/detai.vue","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?cd9c","webpack:///E:/newELv/erlvzihuwai/donkeys-applet/pages/agreement/detai.vue?5ae2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","uni","success","canvasw","canvash","components","myPopup","computed","token","userInfo","loadingSize","showLoading","watch","data","isLoad","agreementId","signImage1","signImage2","signImageKey","isEnd","agreementInfo","title","content","autographInfo","tagStyle","table","th","td","li","onLoad","_that","icon","onShareAppMessage","path","methods","getAgreementInfo","id","getAutographInfo","addAutograph","request","Promise","resolve","reject","finally","hideShow","console","showSign","overSign","canvasId","imageUrl","duration","mask","start","x","y","touchs","move","end","cancel","tap","error","draw","clearClick"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACoM;AACpM,gBAAgB,uMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,aAAa,yNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAuwB,CAAgB,ivBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACgH3xB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACAC;EACAC;IACAC;IACAC;EACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAJ;MACA;QACA;QACA;MACA;IACA;EACA;EACAK;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACA;AACA;AACA;EACAC;IACAC;IACA;IACAR;IACA;MACArB;QACAoB;QACAU;MACA;MACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;MACAX;MACAY;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;QACAC;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAtB;MACA;QACA;UACAO;QACA;QACA;QACA;QACA;MACA;IACA;IACAgB;MAAA;MACA;MACA;QACA;QACA;QACA;UACAC;YACAH;YACArB;YACAO;UACA;QACA;UACAiB;YACAjB;YACAP;UACA;QACA;QACAyB;UACAC;QACA;UACAC;QACA,GACAC;UACA;QACA;MACA;IACA;IACAC;MACAC;MAEAf;IAOA;IACAgB;MAAA;MACA;MAEAhB;IAOA;IACAiB;MACA;MACA;QACA9C;UACA+C;UACA9C;YAAA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBACAc;sBACAC;sBAAA;sBAAA,OACA;oBAAA;sBAAAgC;sBACAnB,qCACAd,wBACAC;sBAAA,MACAa;wBAAA;wBAAA;sBAAA;sBAAA;sBAAA,OACAA;oBAAA;sBAAA;sBAAA;oBAAA;sBAAA;sBAAA,OAEAA;oBAAA;sBAEAA;sBACAA;sBACAA;sBACAA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CACA;YAAA;cAAA;YAAA;YAAA;UAAA;QACA;MACA;QACA7B;UACAoB;UACAU;UACAmB;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;QACAC;QACAC;MACA;MACA;MACAC;IACA;IACA;IACAC;MACA;QACAH;QACAC;MACA;MACA;MACAC;MACA;QACA;MACA;IACA;IAEA;IACAE;MACA;MACA;MACAZ;MACA;MACAU;MACA;MACA;MACA;IACA;;IAEA;IACAG;IAEA;IACAC;IACA;IACAC;IAEA;IACAC;MACA;MACA;MACAN;MACA;MACAjC;MACA;MACAA;MACA;MACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;IACA;IACAwC;MACA;MACA;MACA;MACAxC;MACAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjYA;AAAA;AAAA;AAAA;AAA4lC,CAAgB,0hCAAG,EAAC,C;;;;;;;;;;;ACAhnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/agreement/detai.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/agreement/detai.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detai.vue?vue&type=template&id=de654666&\"\nvar renderjs\nimport script from \"./detai.vue?vue&type=script&lang=js&\"\nexport * from \"./detai.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detai.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/agreement/detai.vue\"\nexport default component.exports","export * from \"-!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detai.vue?vue&type=template&id=de654666&\"","var components\ntry {\n  components = {\n    mpHtml: function () {\n      return import(\n        /* webpackChunkName: \"components/mp-html/mp-html\" */ \"@/components/mp-html/mp-html.vue\"\n      )\n    },\n    uLoading: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-loading/u-loading\" */ \"@/uview-ui/components/u-loading/u-loading.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detai.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detai.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"full\">\r\n\t\t<view class=\"contents not-show\" :class=\"{show: isLoad}\">\r\n\t\t\t<cu-custom bgColor=\"bg-gradual-blue\" :isBack=\"true\">\r\n\t\t\t\t<block slot=\"backText\">返回</block>\r\n\t\t\t\t<block slot=\"content\">协议</block>\r\n\t\t\t</cu-custom>\r\n\t\t\t<view style=\"width: 100%; min-height: 600rpx; margin: 0 auto; background-color: #fff;\">\r\n\t\t\t\t<view style=\"\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tline-height: 100rpx;\r\n        \">{{ agreementInfo.title }}</view>\r\n\t\t\t\t<mp-html container-style=\"padding:20rpx 32rpx\" :content=\"agreementInfo.content\" domain=\"\" lazy-load\r\n\t\t\t\t\tscroll-table selectable use-anchor :tag-style=\"tagStyle\" />\r\n\t\t\t\t<view v-if=\"signImage1\" style=\"text-align: right; display:flex; justify-content: flex-end; padding-right: 20rpx\">\r\n\t\t\t\t\t<image :src=\"signImage1\" style=\"width: 200rpx; height: 100rpx\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"signImage2\" style=\"text-align: right; display:flex; justify-content: flex-end; padding-right: 20rpx\">\r\n\t\t\t\t\t<image :src=\"signImage2\" style=\"width: 200rpx; height: 100rpx\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<myPopup ref=\"pop\">\r\n\t\t\t\t<view style=\"\r\n          background-color: #ffffff;\r\n          border-top-left-radius: 20rpx;\r\n          border-top-right-radius: 20rpx;\r\n        \">\r\n\t\t\t\t\t<view style=\"\r\n            margin-left: 92%;\r\n            margin-bottom: -10rpx;\r\n            width: 40rpx;\r\n            height: 40rpx;\r\n            font-size: 26rpx;\r\n            line-height: 40rpx;\r\n            background-color: #000000;\r\n            opacity: 0.5;\r\n            border-radius: 20rpx;\r\n            text-align: center;\r\n            position: fixed;\r\n            bottom: 34.5%;\r\n            z-index: 3000;\r\n            left: 0rpx;\r\n            color: #ffffff;\r\n          \" @click=\"hideShow\">\r\n\t\t\t\t\t\tX\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view style=\"\r\n            width: 100%;\r\n            height: 100rpx;\r\n            line-height: 100rpx;\r\n            font-size: 30rpx;\r\n            font-weight: bold;\r\n            text-align: center;\r\n          \">开始签名</view>\r\n\t\t\t\t\t<canvas class=\"firstCanvas\" canvas-id=\"firstCanvas\" @touchmove=\"move\" @touchstart=\"start($event)\"\r\n\t\t\t\t\t\t@touchend=\"end\" @touchcancel=\"cancel\" @longtap=\"tap\" disable-scroll=\"true\"\r\n\t\t\t\t\t\t@error=\"error\"></canvas>\r\n\r\n\t\t\t\t\t<view class=\"caozuo\">\r\n\t\t\t\t\t\t<view class=\"chongqian\" @tap=\"clearClick\">重签</view>\r\n\t\t\t\t\t\t<view class=\"over\" @click=\"overSign\">完成签名</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</myPopup>\r\n\t\t\t<view style=\"display: flex; justify-content: center; margin-top: auto; background: #fffl\"\r\n\t\t\t\tv-if=\"token && agreementInfo.status === 1\">\r\n\t\t\t\t<view style=\"\r\n          text-align: center;\r\n          font-size: 26rpx;\r\n          width: 200rpx;\r\n          height: 70rpx;\r\n          line-height: 70rpx;\r\n          background-color: #0599d7;\r\n          color: #ffffff;\r\n          border-radius: 40rpx;\r\n          margin: 0 auto;\r\n          margin-top: 20rpx;\r\n        \" @click=\"showSign(1)\">\r\n\t\t\t\t\t{{ signImage1 ? \"重新签名\" : \"开始签名\" }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"signImage1\" style=\"\r\n          text-align: center;\r\n          font-size: 26rpx;\r\n          width: 200rpx;\r\n          height: 70rpx;\r\n          line-height: 70rpx;\r\n          background-color: #0599d7;\r\n          color: #ffffff;\r\n          border-radius: 40rpx;\r\n          margin: 0 auto;\r\n          margin-top: 20rpx;\r\n        \" @click=\"showSign(2)\">\r\n\t\t\t\t\t{{ signImage2 ? \"重新代签名\" : \"代签名\" }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"caozuo1\"></view>\r\n\t\t</view>\r\n\t\t<view class=\"bg-masker-loading\" v-show=\"showLoading\" @touchmove.stop.prevent @touchmove.stop.prevent>\r\n\t\t\t<view class=\"bg-masker-loading-fixed loading flex align-center justify-center\" @touchmove.stop.prevent\r\n\t\t\t\t@touchmove.stop.prevent>\r\n\t\t\t\t<u-loading color=\"#fff\" mode=\"flower\" :show=\"true\" :size=\"loadingSize\"></u-loading>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetAgreementInfo,\r\n\t\timgUpload,\r\n\t\taddAutograph,\r\n\t\tgetAutographInfo,\r\n\t\tupdateAutograph\r\n\t\t// getAu\r\n\t} from \"@/apis/index.js\"\r\n\tvar content = null;\r\n\tvar touchs = [];\r\n\tvar canvasw = 0;\r\n\tvar canvash = 0;\r\n\tvar _that;\r\n\t//获取系统信息\r\n\tuni.getSystemInfo({\r\n\t\tsuccess: function(res) {\r\n\t\t\tcanvasw = res.windowWidth;\r\n\t\t\tcanvash = res.windowHeight;\r\n\t\t},\r\n\t});\r\n\timport myPopup from \"@/components/qianxiao-pop/qianxiao-pop.vue\";\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmyPopup,\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttoken() {\r\n\t\t\t\treturn this.$store.state.token;\r\n\t\t\t},\r\n\t\t\tuserInfo() {\r\n\t\t\t\treturn this.$store.state.userInfo;\r\n\t\t\t},\r\n\t\t\tloadingSize() {\r\n\t\t\t\treturn uni.upx2px(120)\r\n\t\t\t},\r\n\t\t\tshowLoading() {\r\n\t\t\t\treturn this.$store.state.loading\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\ttoken(val) {\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.getAgreementInfo();\r\n\t\t\t\t\tthis.getAutographInfo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisLoad: false,\r\n\t\t\t\tagreementId: \"\",\r\n\t\t\t\tsignImage1: \"\",\r\n\t\t\t\tsignImage2: \"\",\r\n\t\t\t\tsignImageKey: \"signImage1\",\r\n\t\t\t\tisEnd: false, // 是否签名\r\n\t\t\t\t// 协议\r\n\t\t\t\tagreementInfo: {\r\n\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t},\r\n\t\t\t\t// 用户签名\r\n\t\t\t\tautographInfo: {},\r\n\t\t\t\ttagStyle: {\r\n\t\t\t\t\ttable: 'box-sizing: border-box; border-top: 1px solid #dfe2e5; border-left: 1px solid #dfe2e5;',\r\n\t\t\t\t\tth: 'border-right: 1px solid #dfe2e5; border-bottom: 1px solid #dfe2e5;',\r\n\t\t\t\t\ttd: 'border-right: 1px solid #dfe2e5; border-bottom: 1px solid #dfe2e5;',\r\n\t\t\t\t\tli: 'margin: 5px 0;'\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面加载\r\n\t\t */\r\n\t\tonLoad: function(options) {\r\n\t\t\t_that = this;\r\n\t\t\t//获得Canvas的上下文\r\n\t\t\tcontent = uni.createCanvasContext(\"firstCanvas\", _that);\r\n\t\t\tif (!options.id) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"未知错误！\",\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.agreementId = options.id;\r\n\t\t\tthis.getAgreementInfo();\r\n\t\t\tthis.getAutographInfo()\r\n\t\t},\r\n\t\tonShareAppMessage(){\r\n\t\t\treturn {\r\n                title: this.agreementInfo.title,\r\n\t\t\t\tpath: '/pages/agreement/detai?id=' + this.agreementId,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetAgreementInfo() {\r\n\t\t\t\tthis.$store.state.loading = true\r\n\t\t\t\tgetAgreementInfo({\r\n\t\t\t\t\tid: this.agreementId\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.agreementInfo = res.data\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tthis.isLoad = true\r\n\t\t\t\t\tthis.$store.state.loading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetAutographInfo() {\r\n\t\t\t\tgetAutographInfo({\r\n\t\t\t\t\tagreementId: this.agreementId\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tlet autographInfo = res.data.id ? res.data : {\r\n\t\t\t\t\t\tcontent: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.signImage1 = autographInfo.content.split(',')[0];\r\n\t\t\t\t\tthis.signImage2 = autographInfo.content.split(',')[1];\r\n\t\t\t\t\tthis.autographInfo = autographInfo;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddAutograph(content) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.$store.state.loading = true\r\n\t\t\t\t\tlet request;\r\n\t\t\t\t\tif (this.autographInfo.id) {\r\n\t\t\t\t\t\trequest = updateAutograph({\r\n\t\t\t\t\t\t\tid: this.autographInfo.id,\r\n\t\t\t\t\t\t\tagreementId: this.agreementInfo.id,\r\n\t\t\t\t\t\t\tcontent: content\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequest = addAutograph({\r\n\t\t\t\t\t\t\tcontent: content,\r\n\t\t\t\t\t\t\tagreementId: that.agreementId\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPromise.resolve(request).then(res => {\r\n\t\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\t\tthis.$store.state.loading = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thideShow() {\r\n\t\t\t\tconsole.log(\"333\");\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t_that.$refs.pop.hide();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS || H5\r\n\t\t\t\t_that.$nextTick(() => {\r\n\t\t\t\t\t_that.$refs.pop.hide();\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshowSign(key = 1) {\r\n\t\t\t\tthis.signImageKey = key == 1 ? \"signImage1\" : \"signImage2\";\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t_that.$refs.pop.show();\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS || H5\r\n\t\t\t\t_that.$nextTick(() => {\r\n\t\t\t\t\t_that.$refs.pop.show();\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\toverSign: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (_that.isEnd) {\r\n\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\tcanvasId: \"firstCanvas\",\r\n\t\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\t\tlet signImage1 = _that.signImage1;\r\n\t\t\t\t\t\t\tlet signImage2 = _that.signImage2;\r\n\t\t\t\t\t\t\tlet imageUrl = await imgUpload(res.tempFilePath, 'autograph');\r\n\t\t\t\t\t\t\t_that.signImageKey == \"signImage1\" ?\r\n\t\t\t\t\t\t\t\t(signImage1 = imageUrl) :\r\n\t\t\t\t\t\t\t\t(signImage2 = imageUrl);\r\n\t\t\t\t\t\t\tif (_that.signImageKey == \"signImage2\" || signImage2) {\r\n\t\t\t\t\t\t\t\tawait _that.addAutograph(signImage1 + ',' + signImage2)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait _that.addAutograph(signImage1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_that.signImage1 = signImage1\r\n\t\t\t\t\t\t\t_that.signImage2 = signImage2\r\n\t\t\t\t\t\t\t_that.hideShow();\r\n\t\t\t\t\t\t\t_that.clearClick();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"请先完成签名\",\r\n\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 画布的触摸移动开始手势响应\r\n\t\t\tstart: function(event) {\r\n\t\t\t\t// console.log(event)\r\n\t\t\t\t// console.log(\"触摸开始\" + event.changedTouches[0].x)\r\n\t\t\t\t// console.log(\"触摸开始\" + event.changedTouches[0].y)\r\n\t\t\t\t//获取触摸开始的 x,y\r\n\t\t\t\tlet point = {\r\n\t\t\t\t\tx: event.changedTouches[0].x,\r\n\t\t\t\t\ty: event.changedTouches[0].y,\r\n\t\t\t\t};\r\n\t\t\t\t// console.log(point)\r\n\t\t\t\ttouchs.push(point);\r\n\t\t\t},\r\n\t\t\t// 画布的触摸移动手势响应\r\n\t\t\tmove: function(e) {\r\n\t\t\t\tlet point = {\r\n\t\t\t\t\tx: e.touches[0].x,\r\n\t\t\t\t\ty: e.touches[0].y,\r\n\t\t\t\t};\r\n\t\t\t\t// console.log(point)\r\n\t\t\t\ttouchs.push(point);\r\n\t\t\t\tif (touchs.length >= 2) {\r\n\t\t\t\t\tthis.draw(touchs);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 画布的触摸移动结束手势响应\r\n\t\t\tend: function(e) {\r\n\t\t\t\t// 设置为已经签名\r\n\t\t\t\tthis.isEnd = true;\r\n\t\t\t\tconsole.log(\"end\");\r\n\t\t\t\t// 清空轨迹数组\r\n\t\t\t\ttouchs.pop();\r\n\t\t\t\t// for (let i = 0; i < touchs.length; i++) {\r\n\t\t\t\t// \ttouchs.pop()\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\r\n\t\t\t// 画布的触摸取消响应\r\n\t\t\tcancel: function(e) {},\r\n\r\n\t\t\t// 画布的长按手势响应\r\n\t\t\ttap: function(e) {},\r\n\t\t\t//画布触摸错误\r\n\t\t\terror: function(e) {},\r\n\r\n\t\t\t//绘制\r\n\t\t\tdraw: function(touchs) {\r\n\t\t\t\tlet point1 = touchs[0];\r\n\t\t\t\tlet point2 = touchs[1];\r\n\t\t\t\ttouchs.shift();\r\n\t\t\t\t//设置线的颜色\r\n\t\t\t\tcontent.setStrokeStyle(\"#000\");\r\n\t\t\t\t//设置线的宽度\r\n\t\t\t\tcontent.setLineWidth(5);\r\n\t\t\t\t//设置线两端端点样式更加圆润\r\n\t\t\t\tcontent.setLineCap(\"round\");\r\n\t\t\t\t//设置两条线连接处更加圆润\r\n\t\t\t\tcontent.setLineJoin(\"round\");\r\n\t\t\t\tcontent.moveTo(point1.x, point1.y);\r\n\t\t\t\tcontent.lineTo(point2.x, point2.y);\r\n\t\t\t\tcontent.stroke();\r\n\t\t\t\tcontent.draw(true);\r\n\t\t\t},\r\n\t\t\t//清除操作\r\n\t\t\tclearClick: function() {\r\n\t\t\t\t// 设置为未签名\r\n\t\t\t\tthis.isEnd = false;\r\n\t\t\t\t//清除画布\r\n\t\t\t\tcontent.clearRect(0, 0, canvasw, canvash);\r\n\t\t\t\tcontent.draw(true);\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.ts {\r\n\t\tcolor: #ff485d;\r\n\t\tfont-size: 30upx;\r\n\t\theight: 100upx;\r\n\t\tline-height: 100upx;\r\n\t\tpadding-left: 20upx;\r\n\t}\r\n\r\n\tcanvas {\r\n\t\tbackground-color: #f2f2f2;\r\n\t\twidth: 100%;\r\n\t\theight: 20vh;\r\n\t\t/* margin: 0 25upx; */\r\n\t\t/* height: calc(100vh - 140upx); */\r\n\t}\r\n\r\n\t.contents {\r\n\t\tmin-height: 99vh;\r\n\t\tpadding-top: 20upx;\r\n\t\tpadding-bottom: 100upx;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t#signatureImg {\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.caozuo1 {\r\n\t\tdisplay: flex;\r\n\t\theight: 0;\r\n\t\theight: constant(safe-area-inset-bottom);\r\n\t\theight: env(safe-area-inset-bottom);\r\n\t\twidth: 750upx;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: #eeeeee;\r\n\t\tbackground-color: #fff;\r\n\t\tz-index: 1000;\r\n\t}\r\n\r\n\t.caozuo {\r\n\t\tdisplay: flex;\r\n\t\theight: 100rpx;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.caozuo view {\r\n\t\twidth: 40%;\r\n\t\ttext-align: center;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tmargin-left: 5%;\r\n\t\tborder-radius: 40rpx;\r\n\t}\r\n\r\n\t.caozuo view:last-child {\r\n\t\twidth: 40%;\r\n\t\ttext-align: center;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tmargin-left: 10%;\r\n\t}\r\n\r\n\t.caozuo view:active {\r\n\t\tbackground-color: #cccccc;\r\n\t\tcolor: #333333;\r\n\t\tbackground-color: #fff\r\n\t}\r\n\r\n\t.chongqian {\r\n\t\tbackground-color: #ff8f58;\r\n\t}\r\n\r\n\t.over {\r\n\t\tbackground-color: #0599d7;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detai.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detai.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1711039577436\n      var cssReload = require(\"E:/安装吧/HBuilderX.3.99.2023122611/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}